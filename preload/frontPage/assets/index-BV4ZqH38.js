import{X as R,bu as A,ae as M,L as O,B as p,bf as P,a0 as a,a9 as o,b4 as S,a5 as $,a3 as y,aL as F,a4 as r,a1 as G,aK as d,J as _,ab as C,aa as i,a2 as u,bA as N,bB as U,aA as f,aD as j}from"./index-gdxy0Tth.js";import{G as q}from"./card-Bx_at4sc.js";import{g as J,E as K}from"./index-mB_3OrrA.js";const T=["onContextmenu"],X=["onUpdate:modelValue"],H=["onClick"],Q=["src"],W=["value"],Y={key:3,class:"filename"},Z={class:"describe"},ee={key:0},te={key:1},ce=R({name:"GridView",__name:"index",props:{fileList:{}},emits:["fileClick","fileChoosed","finish","cancel"],setup(b,{expose:x,emit:E}){const m=b,l=E,L=A(),s=M(m.fileList.reduce((e,n)=>(e[n.id]=!1,e),{})),h=O(null),w=e=>l("fileClick",m.fileList[e]),B=(e,n)=>{e.preventDefault(),s[n]=!0},g=async e=>{l("finish",e,h.value[0].value),s[e.id]=!1},z=e=>{l("cancel",e),s[e.id]=!1};return p(s,()=>l("fileChoosed",s)),p(()=>m.fileList,e=>{e.forEach(n=>{s[n.id]===void 0&&(s[n.id]=!1)})}),p(()=>L.query.path,()=>{Object.keys(s).forEach(e=>{delete s[e]})}),x({clearSelection:()=>Object.keys(s).map(e=>s[e]=!1)}),(e,n)=>{const D=K,k=j,v=q,I=P("focus");return a(!0),o(C,null,S(e.fileList,(t,V)=>(a(),o("div",{key:t.id,class:$(["file-item",{checked:s[t.id]}]),onContextmenu:c=>B(c,t.id)},[y(r("input",{class:"file-checkbox",type:"checkbox","onUpdate:modelValue":c=>s[t.id]=c,name:"selected"},null,8,X),[[F,s[t.id]]]),r("div",{onClick:c=>w(V)},[t.fileType==="picture"?(a(),G(D,{key:0,src:t.thumbnailPath||t.filePath,lazy:!0,"preview-src-list":[t.filePath],class:"picture",fit:"cover","preview-teleported":"",onClick:d(()=>{},["stop"])},null,8,["src","preview-src-list"])):(a(),o("img",{key:1,src:_(J)(t),class:"picture"},null,8,Q)),t.isRename?(a(),o(C,{key:2},[y(r("input",{class:"rename-ipt",type:"text",name:"filename",ref_for:!0,ref_key:"renameIpt",ref:h,value:t.name,onClick:d(()=>{},["stop"])},null,8,W),[[I]]),i(v,{type:"primary",size:"small",class:"rename-btn",onClick:d(c=>g(t),["stop"])},{default:u(()=>[i(k,{size:"12"},{default:u(()=>[i(_(N))]),_:1})]),_:2},1032,["onClick"]),i(v,{type:"primary",size:"small",class:"rename-btn",onClick:d(c=>z(t),["stop"])},{default:u(()=>[i(k,{size:"12"},{default:u(()=>[i(_(U))]),_:1})]),_:2},1032,["onClick"])],64)):(a(),o("p",Y,f(t.name),1)),r("div",Z,[t.isDir?(a(),o("p",ee,f(t.modified),1)):(a(),o("p",te,f(t.size),1))])],8,H)],42,T))),128)}}});export{ce as default};
