import{X as T,bu as A,L as F,K as R,a0 as t,a9 as p,aa as l,a2 as c,a4 as e,aA as _,J as K,bB as N,ab as b,b4 as C,a1 as k,aM as E,a3 as V,a7 as $,aK as j,bD as q,aD as z,bx as G,by as J,bt as P}from"./index-gdxy0Tth.js";import{G as X,K as H}from"./card-Bx_at4sc.js";import{r as Q,m as U,a as W,b as Y,c as Z,_ as ee}from"./index-mB_3OrrA.js";const S=n=>(G("data-v-9ff32669"),n=n(),J(),n),se={class:"card-header"},ae={class:"card-header-text"},oe={class:"breadcrumb-wrapper"},te={class:"table-wrapper"},ce={key:0,class:"dic-table"},le=S(()=>e("colgroup",null,[e("col",{width:"100%"})],-1)),ne=["onClick"],re=S(()=>e("img",{src:ee,alt:"",width:"25px",height:"25px",class:"file-pic"},null,-1)),ie={class:"filename"},pe={class:"card-footer"},de=T({name:"MoveSelect",__name:"index",props:{mvOrCopyShow:{type:Boolean},filenameList:{},popoverType:{},onSuccess:{type:Function}},emits:["update:mvOrCopyShow"],setup(n,{emit:g}){const m=n,x=g,B=A(),o=F(["全部文件"]),h=R([]),f=async s=>{const a=[...o.value.slice(1),s].join("/"),u=await Q(a);if(u.code===200){const v=u.data.fileList.filter(r=>r.isDir).map(r=>r.name);h.value=v}s&&o.value.push(s)};f("");const I=s=>{const a=o.value.indexOf(s);a>-1&&(o.value=o.value.slice(0,a+1)),f("")},L=async()=>{const s=o.value.slice(1).join("/");try{const a=await U(B.query.path,m.filenameList,s,m.popoverType);a.code===200&&q({type:"success",message:a.msg})}catch{}finally{d(),m.onSuccess()}},d=()=>x("update:mvOrCopyShow",!1);return(s,a)=>{const u=z,v=W,r=Y,O=Z,w=X,D=H;return t(),p(b,null,[l(D,{shadow:"always",class:"move-card"},{header:c(()=>[e("div",se,[e("span",ae,_(s.popoverType==="move"?"移动到":"复制到"),1),l(u,{size:15,class:"close-btn",onClick:d},{default:c(()=>[l(K(N))]),_:1})])]),default:c(()=>[e("div",oe,[l(r,{"separator-icon":"ArrowRight"},{default:c(()=>[(t(!0),p(b,null,C(o.value,(i,y)=>(t(),k(v,{key:y,onClick:M=>I(i)},{default:c(()=>[e("span",null,_(i),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),e("div",te,[h.value.length>1?(t(),p("table",ce,[le,e("tbody",null,[(t(!0),p(b,null,C(h.value,(i,y)=>(t(),p("tr",{key:y,class:"dic-table-row",onClick:M=>f(i)},[e("td",null,[re,e("span",ie,_(i),1)])],8,ne))),128))])])):(t(),k(O,{key:1,description:`移动到 ${o.value.at(-1)} 文件夹`},null,8,["description"]))]),e("div",pe,[l(w,{plain:"",onClick:d},{default:c(()=>[E("取消")]),_:1}),l(w,{type:"primary",onClick:L},{default:c(()=>[E(_(s.popoverType==="move"?"移动到此":"复制到此"),1)]),_:1})])]),_:1}),V(e("div",{class:"panel-cover",onClick:j(d,["self"])},null,512),[[$,s.mvOrCopyShow]])],64)}}}),he=P(de,[["__scopeId","data-v-9ff32669"]]);export{he as default};
